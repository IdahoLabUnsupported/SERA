<!doctype html public "-//w3c//dtd html 4.0 transitional//en">
<html>
<head>
   <meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1">
   <meta name="GENERATOR" content="Mozilla/4.6 [en] (X11; U; SunOS 5.6 sun4u) [Netscape]">
   <meta name="Description" content="This is the SERA Manual page for sera3d.">
   <title>SERA Manual - Section 6</title>
</head>
<body text="#274342" bgcolor="#FFFFFF" link="#0000EE" vlink="#551A8B" alink="#FF0000" background="mainbackground.gif" nosave>

<center><a href="sec05.html"><img SRC="bullet10.gif" NOSAVE height=17 width=17></a><b><a href="sec05.html">Previous<a href="toc.html"><img SRC="bullet10.gif" NOSAVE height=17 width=17></a></a><a href="toc.html">Contents<a href="sec07.html"><img SRC="bullet10.gif" NOSAVE height=17 width=17></a></a><a href="sec07.html">Next</a></b>
<p><b><font color="#274342"><font size=+2>SERA:</font></font></b>
<br><b><font color="#274342"><font size=+2>Simulation Environment for Radiotherapy
Applications</font></font></b>
<br><b><font color="#274342"><font size=+2>User's Manual</font></font></b>
<br><b><font color="#274342"><font size=+2>Version 1C0</font></font></b>
<p><img SRC="marblebar.jpg" NOSAVE height=6 width=460></center>

<p><b><font color="#274342"><font size=+3>6.&nbsp; Three-Dimensional Reconstruction
(sera3d)</font></font></b>
<p><b><font color="#274342">The main interface for sera3d is composed of
4 main parts:&nbsp; the menubar; the message bar; the main rendering window;
and the tools.</font></b>
<p><img SRC="Sera3D/main_interface.jpg" NOSAVE height=755 width=910>
<br>&nbsp;
<p><a NAME="6.1"></a><b><font color="#274342"><font size=+1>6.1.&nbsp;
The Menubar</font></font></b>
<p><a NAME="6.1.1"></a><b><font color="#274342">6.1.1.&nbsp; The File Menu</font></b>
<p><b><font color="#274342">Figure 6.1 shows the sera3d </font><font color="#FF0000">File</font><font color="#274342">
menu.</font></b>
<p><img SRC="Sera3D/file_menu.jpg" NOSAVE height=195 width=202>
<p><b>Figure 6.1.&nbsp; File menu selections.</b>
<p><b><font color="#274342">To begin a reconstruction, the user must first
load a univel file pair (</font><font color="#CC6600">.uv/.uvh</font><font color="#274342">),
which is created by <a href="sec05.html">seraModel</a>.&nbsp; This is done
with the </font><font color="#008007">Load Regions</font><font color="#274342">
menu item.&nbsp; The cascading menu off of </font><font color="#008007">Load
Regions</font><font color="#274342"> will remember recently used files.&nbsp;
A file select box is also available under the cascading menu.&nbsp; Other
menu selections will remain grayed out until regions have been loaded.</font></b>
<p><b><font color="#274342">Once the regions are loaded, other file types
my also be loaded.&nbsp; These include the medical images, which can be
loaded with </font><font color="#008007">Load Images (QIM/QHD)</font><font color="#274342">,
particle track information generated by <a href="appA.html">seraMC</a>
with the </font><font color="#008007">Load Paths (PP)</font><font color="#274342">
option, and either single or 3D isodose contour files, respectively, with
the </font><font color="#008007">Load Single Contour File</font><font color="#274342">
and </font><font color="#008007">Load Full Contour File</font><font color="#274342">
selections.&nbsp; The </font><font color="#008007">Launch</font><font color="#274342">
menu item, which is present in all modules, allows launching of the other
modules of the SERA package.&nbsp; Choosing the </font><font color="#009900">Exit
</font><font color="#274342">button
closes sera3d.</font></b>
<p><a NAME="6.1.2"></a><b><font color="#274342">6.1.2.&nbsp; The Options
Menu</font></b>
<p><b><font color="#274342">The selections available from the </font><font color="#FF0000">Options</font><font color="#274342">
menu are shown in Figure 6.2.&nbsp; </font>The Options Menu gives various
options for controlling the interface.</b>
<p><img SRC="Sera3D/options_menu.jpg" NOSAVE height=162 width=216>
<p><b>Figure 6.2.&nbsp; Options menu selections.</b>
<p><b><font color="#274342">The </font><font color="#008007">Fast Rotation</font>
option applies to the reconstruction.&nbsp; When using smooth surfaces
or solid rendering, the rendering speed is not always interactive (especially
without hardware accelerated graphics).&nbsp; To dramatically increase
the rendering speed of rotations, <font color="#008007">Fast Rotation</font>
is used.&nbsp; When rotating an object, the object may be rendered as a
wireframe, or not at all, to keep the rendering interactive.&nbsp;&nbsp;
The choices for <font color="#008007">Fast Rotation</font> are:</b>
<ul>
<li>
<b>Wireframe - when the object is rotated, it will be drawn as a wireframe</b></li>

<li>
<b>Axes - the object being rotated will not be drawn, but only the coordinate
axes will be shown</b></li>

<li>
<b>Off - the object will be drawn in its current rendering style.</b></li>
</ul>
<b>The <font color="#008007">Background</font> option will set the background
of the main rendering window to one of the following choices:&nbsp; Black;
25% gray; 50% gray; 75% gray; or white.&nbsp; <font color="#008007">Main
Window Size</font> sets the size of the main rendering window.</b>
<p><b>Sera3d has the ability to show multiple rendering windows.&nbsp;
This feature is called multi-view.&nbsp; When this is enabled, there will
be three small rendering windows to the left of the main window, each through
a different camera.&nbsp; Two options control the multi-view renderings.
<font color="#008007">Multi-View
Window Size</font> sets the size of the three multi-view rendering windows,
and <font color="#008007">Multi-View</font> simply toggles the multi-view
feature on and off.&nbsp; <font color="#008007">Messages</font> toggles
the message bar, just below the menubar, on and off.</b>
<p><a NAME="6.1.3"></a><b><font color="#274342">6.1.3.&nbsp; The Preferences
Menu</font></b>
<p><b><font color="#274342">The </font><font color="#FF0000">Preferences</font><font color="#274342">
menu will simply bring up the preferences dialog window.&nbsp; The preferences
dialog is covered later in this section of the manual.</font></b>
<p><a NAME="6.1.4"></a><b>6.1.4.&nbsp; The Help Menu</b>
<p><b>The <font color="#FF0000">Help</font> menu at the top right of the
menu bar provides context-sensitive help.&nbsp; To use it, simply click
the <font color="#FF0000">Help</font> item, and the cursor will turn into
a question mark.&nbsp; Then, click the question mark on the item about
which you have a question.&nbsp; This will pop open a help window on that
item.</b>
<br>&nbsp;
<p><a NAME="6.2"></a><b><font color="#274342"><font size=+1>6.2.&nbsp;
The Message Bar</font></font></b>
<p><b><font color="#274342">The sera3d message bar is shown in Figure 6.3
below.</font></b>
<p><img SRC="Sera3D/message_bar.jpg" NOSAVE height=40 width=700>
<p><b>Figure 6.3.&nbsp; Message bar for sera3d.</b>
<p><b>The message bar in sera3d provides interactive help on the various
controls, as well as status information during rendering and reconstruction.&nbsp;
As the mouse pointer moves across the various tools in sera3d, the message
bar reports the name and use of the tool.&nbsp; The center of the message
bar displays the messages, while the right side of the message bar displays
the name of the univel file in use.</b>
<br>&nbsp;
<p><a NAME="6.3"></a><b><font color="#274342"><font size=+1>6.3.&nbsp;
The Main Rendering Window</font></font></b>
<p><b><font color="#274342">The main rendering window is the large window
in which sera3d renders the reconstruction.&nbsp; Clicking the right mouse
button in the window brings up a popup menu which switches between using
the mouse and using sliders to rotate the reconstruction.</font></b>
<br>&nbsp;
<p><a NAME="6.4"></a><b><font color="#274342"><font size=+1>6.4.&nbsp;
The Tools</font></font></b>
<p><b><font color="#274342">The sera3d Tools panel contains the various
mechanisms for manipulation of data displays.&nbsp; The Tools panel is
shown in its default state in Figure 6.4.</font></b>
<p><img SRC="Sera3D/tools.jpg" NOSAVE height=626 width=220>
<p><b>Figure 6.4.&nbsp; The sera3d Tools panel in its default configuration.</b>
<p><b><font color="#274342">The tools for sera3d are all laid out to the
right of the main rendering window.&nbsp; The top of the tool bar has the
</font><font color="#008007">Bodies</font><font color="#274342">
window.&nbsp; The </font><font color="#008007">Bodies</font><font color="#274342">
window lists all of the segmented regions in the current univel file.&nbsp;
All of the listed bodies can be toggled </font><font color="#FF0000">on/off</font><font color="#274342">
simply by clicking on their name in the </font><font color="#008007">Bodies</font><font color="#274342">
window.&nbsp; In the current image all bodies are toggled </font><font color="#FF0000">on</font><font color="#274342">
(default).&nbsp; When a body is toggled </font><font color="#FF0000">off</font><font color="#274342">,
it is removed from the rendering window.&nbsp; Toggling bodies </font><font color="#FF0000">on</font><font color="#274342">
and </font><font color="#FF0000">off</font><font color="#274342"> can be
done at any time.&nbsp; Below the </font><font color="#008007">Bodies</font><font color="#274342">
window are the </font><font color="#008007">Control Panel buttons</font><font color="#274342">.&nbsp;
The </font><font color="#008007">Control Panel buttons</font><font color="#274342">
switch between the available control panels.&nbsp; The </font><font color="#008007">Control
Panel</font><font color="#274342"> is located below the double divider,
beneath the </font><font color="#008007">Control Panel buttons</font><font color="#274342">.</font></b>
<p><b><font color="#274342">In the example shown in Figure 6.4, the </font><font color="#008007">Control
Panel </font><font color="#274342">begins with the Style panel and continues
to the bottom of the Tools panel.&nbsp; The button corresponding to the
active panel is depressed - in this case, the first panel (viewing panel).&nbsp;
Each panel provides various tools in sera3d.&nbsp; The </font><font color="#008007">Control
Panel buttons</font><font color="#274342"> are all labelled with icons.&nbsp;
As the mouse moves over an icon, the message bar displays the meaning of
the icon.&nbsp; The buttons, in the order of their appearance on the Tools
panel, are as follows:</font></b>
<p><b><tt><font color="#274342">&nbsp;</font><font color="#000000"> Viewing&nbsp;&nbsp;&nbsp;&nbsp;
Color&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
Transparency&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; Lighting&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
Axes</font></tt></b>
<br><b><tt><font color="#000000">&nbsp; Clipping&nbsp;&nbsp;&nbsp; Polygon&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
Particle Tracking&nbsp;&nbsp;&nbsp; Slice&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
Contour</font></tt></b>
<br><b><tt><font color="#000000">&nbsp; Mouse&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
View Parameters&nbsp;&nbsp; Beam&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
Unused&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; Texture Mapping</font></tt></b>
<p><b><font color="#274342">All of the control panels and their tools are
explained in the subsequent subsections.</font></b>
<p><a NAME="6.4.1"></a><b><font color="#274342">6.4.1.&nbsp; Viewing Panel</font></b>
<p><b><font color="#274342">Figure 6.5 shows the panel configuration for
the </font><font color="#FF0000">Viewing</font><font color="#274342"> panel.</font></b>
<p><img SRC="Sera3D/viewing_panel.jpg" NOSAVE height=309 width=199>
<p><b>Figure 6.5.&nbsp; Viewing panel layout.</b>
<p><b>The top of the <font color="#FF0000">Viewing</font> panel has four
view style buttons.&nbsp; These control the rendering style for the segmented
bodies.&nbsp; The first is the <font color="#FF0000">Wireframe</font> rendering
style (default).&nbsp; Next is the <font color="#FF0000">Solid Outline</font>
style.&nbsp; The <font color="#FF0000">Solid</font> rendering style is
the third, and the <font color="#FF0000">Polygonal Surfaces</font> style
is the last button.&nbsp; The greatest image fidelity is provided by the
polygons, but the wireframe provides the fastest rendering performance.&nbsp;
The other styles offer degrees of compromise between the two.</b>
<p><b>Below the view style buttons is the <font color="#008007">Global
Scaling</font> slider.&nbsp; The slider allows the rendering to be scaled
to a larger or smaller size.&nbsp; <font color="#274342">Below and to the
left is the </font><font color="#008007">Camera</font><font color="#274342">
panel.&nbsp; This selects the camera angle for the rendering in the main
window.&nbsp; The default camera angle is not in this list.&nbsp; The </font><font color="#008007">Reset
Viewing</font><font color="#274342"> button resets the scaling and camera
to their default values, and sets the rotation of the rendering back to
its original position.&nbsp; The </font><font color="#008007">Auto Rotate</font><font color="#274342">
feature will start and stop the rotation of the rendering.&nbsp; The four
arrows control the direction of the auto rotation.&nbsp; The center button
stops the auto rotation, while the two arrows below control the speed of
the rotation.</font></b>
<p><a NAME="6.4.2"></a><b><font color="#274342">6.4.2.&nbsp; Color Panel</font></b>
<p><b><font color="#274342">The </font><font color="#FF0000">Color</font><font color="#274342">
panel layout is illustrated in Figure 6.6 below.</font></b>
<p><img SRC="Sera3D/color_panel.jpg" NOSAVE height=270 width=199>
<p><b>Figure 6.6.&nbsp; Layout of the Color panel.</b>
<p><b>The <font color="#FF0000">Color</font> panel sets the colors of the
rendered regions.&nbsp; The <font color="#008007">Body</font> menu at the
top provides the list of bodies available in the univel file; the selected
body is the body which is changing color.&nbsp; Below the body menu is
a <font color="#008007">Color Presets</font> list.&nbsp; This list is simply
a few preset colors for various regions.&nbsp; By clicking on a preset
color, the sliders and color swatch will be updated to the preset values.&nbsp;
The <font color="#008007">color swatch</font> displays the current color
set by the red, green, and blue sliders.&nbsp; Finally, to apply the selected
color to the selected body, the <font color="#008007">Apply to Body</font>
button is used.</b>
<p><a NAME="6.4.3"></a><b><font color="#274342">6.4.3.&nbsp; Transparency
Panel</font></b>
<p><b><font color="#274342">The layout of the Transparency panel is illustrated
in Figure 6.7 below.</font></b>
<p><img SRC="Sera3D/transparency_panel.jpg" NOSAVE height=214 width=201>
<p><b><font color="#274342">Figure 6.7.&nbsp; Layout of the Transparency
panel.</font></b>
<p><b><font color="#274342">The </font><font color="#FF0000">Transparency</font><font color="#274342">
panel is very similar to the <a href="#6.4.2">Color</a> panel.&nbsp; The
current body for which to set the transparency is selected in the </font><font color="#008007">Body</font><font color="#274342">
menu.&nbsp; The opacity wanted for the current region is then selected
by using either the </font><font color="#008007">Opacity Presets</font><font color="#274342">
list or the </font><font color="#008007">Opacity</font><font color="#274342">
slider.&nbsp; Then the </font><font color="#008007">Apply to Body</font><font color="#274342">
button applies the opacity setting to the selected body.</font></b>
<p><a NAME="6.4.4"></a><b><font color="#274342">6.4.4.&nbsp; Lighting Panel</font></b>
<p><img SRC="Sera3D/lighting_panel.jpg" NOSAVE height=218 width=198>
<p><b><font color="#274342">Figure 6.8.&nbsp; Layout of the Lighting panel.</font></b>
<p><b><font color="#274342">The </font><font color="#FF0000">Lighting</font><font color="#274342">
panel, shown in Figure 6.8, controls the lighting of the rendering.&nbsp;
The </font><font color="#FF0000">Lighting</font><font color="#274342">
panel will only activate when the </font><font color="#FF0000"><a href="#6.4.1">polygon</a></font><font color="#274342">
view style is used.&nbsp; Five lights are available in sera3d, and multiple
lights may be illuminated simultaneously.&nbsp; These are listed in the
</font><font color="#008007">Lights</font><font color="#274342">
frame.&nbsp; Below the </font><font color="#008007">Lights</font><font color="#274342">
frame is the </font><font color="#008007">Ambient</font><font color="#274342">
slider.&nbsp; This sets the fraction of ambient light in the rendering.&nbsp;
The </font><font color="#008007">Default</font><font color="#274342"> button
returns the lighting controls to their default positions.</font></b>
<p><a NAME="6.4.5"></a><b><font color="#274342">6.4.5.&nbsp; Axes Panel</font></b>
<p><img SRC="Sera3D/axes_panel.jpg" NOSAVE height=95 width=199>
<p><b>Figure 6.9.&nbsp; Layout of the Axes panel.</b>
<p><b>The <font color="#FF0000">Axes</font> panel, shown in Figure 6.9,
allows the user to inlay the axes into the rendering.&nbsp; The icons at
the top represent the type of axes to inlay.&nbsp; The first axes are the
full set Inferior-Superior, Posterior-Anterior, and Right-Left.&nbsp; The
second and third represent the positive quadrant, with the third icon providing
a bold representation of the axes.&nbsp; Below the icons is the <font color="#008007">Axes
Labels</font> toggle. This toggles the labels of the axes in the rendering.</b>
<p><a NAME="6.4.6"></a><b><font color="#274342">6.4.6.&nbsp; Clipping Panel</font></b>
<p><img SRC="Sera3D/clipping_panel.jpg" NOSAVE height=216 width=200>
<p><b><font color="#274342">Figure 6.10.&nbsp; The Clipping panel layout.</font></b>
<p><b><font color="#274342">Sera3d provides two clipping planes in each
orthogonal direction.&nbsp; A clipping plane is used to "cut" away portions
of the rendered regions.&nbsp; The </font><font color="#FF0000">Clipping</font><font color="#274342">
panel, illustrated in Figure 6.10, contains a </font><font color="#008007">Clipped
Bodies</font><font color="#274342"> list.&nbsp; The </font><font color="#008007">Clipped
Bodies</font><font color="#274342"> list shows all of the segmented regions
for the current univel file.&nbsp; The buttons on the list toggle the clipping
of a specific body by the current clipping planes.&nbsp; If a body is checked,
it will be clipped; if it is not checked, no clipping planes will cut it.&nbsp;
To set the clipping planes, bring up the </font><font color="#008007">clipping
popup</font><font color="#274342"> window as seen in Figure 6.11., using
the </font><font color="#008007">Set Clipping</font><font color="#274342">
button</font></b>
<p><img SRC="Sera3D/clipping_popup.jpg" NOSAVE height=716 width=247>
<p><b><font color="#274342">Figure 6.11.&nbsp; The Clipping popup widget.</font></b>
<p><b><font color="#274342">The </font><font color="#008007">Clipping Popup</font><font color="#274342">
provides the tools necessary for controlling the 6 clipping planes.&nbsp;
At the top is the option to clip interactively.&nbsp; When clipping is
performed interactively, as the sliders are moved, the clipping is updated
in the main rendering window.&nbsp; At the same time, the </font><font color="#008007">draw
planes</font><font color="#274342"> toggle will display the clipping planes
in the main rendering window.</font></b>
<p><b><font color="#274342">The three clipping directions allowed are </font><font color="#FF0000">Axial</font><font color="#274342">,
</font><font color="#FF0000">Coronal</font><font color="#274342">,
and
</font><font color="#FF0000">Sagittal</font><font color="#274342">.&nbsp;
To clip in a particular direction, first select that direction from the
three push buttons.&nbsp; The panel below will switch to the appropriate
direction.&nbsp; At the top of the clipping panel, there is a toggle button,
which is labelled with the selected clipping direction.&nbsp; In the example
shown in Figure 6.11, this is labelled </font><font color="#008007">Axial
Clipping</font><font color="#274342">.&nbsp; This button will toggle the
clipping planes - i.e., it will activate the clipping process.&nbsp; Below
the toggle are labels showing the current position of the two clipping
planes.&nbsp; Each clipping plane has a corrresponding slider.&nbsp; By
moving the slider up or down, the label representing the same clipping
plane is updated to show the position of the clipping plane.&nbsp; If the
toggle button is in the depressed position, clipping will proceed continuously
as the sliders are moved.&nbsp; There is also a text box available for
typing in a specific clipping location.&nbsp; For example, to clip everything
above 98.35 in the axial direction, type
</font><font color="#FF0000">98.35</font><font color="#274342">
into the text box, and press the </font><font color="#008007">Above</font><font color="#274342">
button.&nbsp; This will set the slider to the appropriate position.</font></b>
<p><b><font color="#274342">Below each slider is a toggle called </font><font color="#008007">Cap</font><font color="#274342">.&nbsp;
If this toggle is selected, the corresponding clipping plane will be capped
with the medical image data, if the images have been loaded.</font></b>
<p><b><font color="#274342">Clipping in multiple directions is also supported.&nbsp;
To clip in the sagittal direction as well as the axial direction, turn
on and set up the axial direction clipping information, then press the
</font><font color="#FF0000">Sagittal</font><font color="#274342">
push button, enable the sagittal direction, and set the sliders to the
desired position.</font></b>
<p><b><font color="#274342">When clipping is performed interactively, the
</font><font color="#008007">Done</font><font color="#274342">
button simply closes the window.&nbsp; If clipping is performed non-interactively,
the
</font><font color="#008007">Done</font><font color="#274342"> button
will apply all the clipping settings to the rendering.</font></b>
<p><a NAME="6.4.7"></a><b><font color="#274342">6.4.7.&nbsp; Polygon Panel</font></b>
<p><img SRC="Sera3D/polygon_panel.jpg" NOSAVE height=58 width=234>
<p><b>Figure 6.12.&nbsp; The Polygon panel layout.</b>
<p><b>The <font color="#FF0000">polygon</font> panel, as shown in Figure
6.12, has only one menu.&nbsp; This menu controls which algorithm will
be used when creating the polygonal surfaces for the <font color="#FF0000">polygonal</font>
view style.&nbsp; The options for the algorithm are:</b>
<ul>
<li>
<b>8-Cell algorithm using surface normals - provides flat shaded polygons</b></li>

<li>
<b>8-Cell algorithm using vertex normals - provides smooth shaded surfaces</b></li>

<li>
<b>Marching Cubes - uses the Marching Cubes algorithm to determine the
polygonal surfaces, and produces more polygons than the 8-Cell algorithm,
thus slowing the rendering, but increasing the fidelity.</b></li>
</ul>
<a NAME="6.4.8"></a><b><font color="#274342">6.4.8.&nbsp; Particle Tracking
Panel</font></b>
<p><img SRC="Sera3D/particle_track_panel.jpg" NOSAVE height=242 width=201>
<p><b>Figure 6.13.&nbsp; The Particle Tracking panel.</b>
<p><b>The <font color="#FF0000">particle tracking</font> panel controls
the rendering of the loaded particle tracks.&nbsp; The particle tracks
are output from the <a href="appA.html">seraMC</a> calculations, and stored
in the <font color="#CC6600">lost.pp </font><font color="#274342">or</font><font color="#CC6600">
tracks.pp</font> file.</b>
<p><b>The <font color="#008007">Display Particles</font> button toggles
the display status for all particles in the rendering.&nbsp; The <font color="#008007">antialiasing</font>
button toggles the antialiasing mode.&nbsp; Antialiasing is used to smooth
the particles tracks in the rendering.</b>
<p><b>Below the two toggles is the panel of particle track types.&nbsp;
To the left of each type name is a toggle and a color box.&nbsp; The toggle
controls the rendering of that particular type.&nbsp; The color box shows
the current color and line style of the particle track type.&nbsp; Clicking
on the color box will bring up a small dialog, allowing the user to change
the color and line style.</b>
<p><a NAME="6.4.9"></a><b><font color="#274342">6.4.9.&nbsp; Slice Panel</font></b>
<p><img SRC="Sera3D/slice_panel.jpg" NOSAVE height=203 width=200>
<p><b><font color="#274342">Figure 6.14.&nbsp; The Slice panel layout.</font></b>
<p><b><font color="#274342">The </font><font color="#FF0000">slice</font><font color="#274342">
panel, displayed in Figure 6.14, provides the tools for inlaying a single
medical image slice into the rendering.&nbsp; To inlay medical data, the
images must first be loaded from the <a href="#6.1.1">file menu</a>.&nbsp;
Once the images are loaded, they are built into a texture map.&nbsp; From
the texture map, the medical slices can be inlaid into the rendering.</font></b>
<br><b><font color="#274342">The </font><font color="#008007">Inlay Slice</font><font color="#274342">
toggle controls the display of the slice(s) in the rendering.&nbsp; The
direction of the slice can be set by selecting it from the direction panel.&nbsp;
The choices are </font><font color="#FF0000">Axial</font><font color="#274342">,
</font><font color="#FF0000">Coronal</font><font color="#274342">,
or </font><font color="#FF0000">Sagittal</font><font color="#274342">.&nbsp;
The </font><font color="#008007">External Window</font><font color="#274342">
button brings up an external window containing the 2-D slice which is currently
inlaid. </font><font color="#990000">This option is currently unavailable
for the SUN systems.</font></b>
<p><b><font color="#274342">At the bottom of the </font><font color="#FF0000">Slice</font><font color="#274342">
panel is the </font><font color="#008007">slice slider</font><font color="#274342">.&nbsp;
This slider controls the position of the inlaid slice.&nbsp; Above the
slider is the label reporting the slices' position.&nbsp; The slider is
interactive.&nbsp; As the slider is moved, the slice is moved in the rendering,
and the label displays the position of the slice.</font></b>
<p><a NAME="6.4.10"></a><b><font color="#274342">6.4.10.&nbsp; Contour
Panel</font></b>
<p><img SRC="Sera3D/contour_panel.jpg" NOSAVE height=371 width=200>
<p><b>Figure 6.15.&nbsp; The Contour panel layout.</b>
<p><b>The <font color="#FF0000">contour</font> panel, shown in Figure 6.15,
is used to display the dose contours output by <a href="appA.html">seraMC</a>.&nbsp;
The displaying of the dose contours is done in two ways.&nbsp; The first
method is to colorwash the medical image data.&nbsp; With this method,
the inlaid slices will be displayed with the contour rendered as colorwashed
regions on the image slices.&nbsp; The <font color="#008007">Outlines Only</font>
button reduces the colorwash to outlines of the isodose contours, but this
is only active when the <font color="#008007">Color With Doses</font> button
is also activated.&nbsp; The second method of displaying the dose contours
is to build contour surfaces.</b>
<p><b>The dose contours must first be loaded before they can be displayed.&nbsp;
They are loaded from the <a href="#6.1.1">file menu;</a> each contour data
file may be loaded singly or the 3D contour data file may be loaded in
one step.&nbsp; To set which contour levels to display, click on the
<font color="#008007">Edit
Contour Levels</font> button to obtain a small popup window.&nbsp; Simply
typing in the contour levels, separated by spaces, will update the legend
for the new levels.</b>
<p><b>Below the <font color="#008007">Outlines Only</font> toggle is the
<font color="#008007">Dose
Component</font> menu.&nbsp; This determines which dose component of the
contours will be displayed.&nbsp; These are the same components produced
by the <a href="appA.html">seraMC</a> dose calculation.&nbsp; The <font color="#008007">Colorwash
Legend</font> shows the current levels to view, as well as their corresponding
colors.&nbsp; The color for a particular level can be changed by clicking
on the corresponding color box.&nbsp; Finally, the <font color="#008007">Apply
Legend </font>button will colorwash the slices with the current settings.</b>
<p><b>To build the contour surfaces, press the <font color="#008007">Build
Contour Surfaces</font> button at the top of the Contour panel.&nbsp; The
surfaces are built according to the levels and colors specified in the
legend.&nbsp; Once the surfaces are built, they are treated as additional
bodies.&nbsp; They will be listed in the <a href="#6.4">Bodies List</a>
at the top of the Tool bar.&nbsp; They will also appear in the bodies menu
of the color and transparency panels.</b>
<p><a NAME="6.4.11"></a><b><font color="#274342">6.4.11.&nbsp; Mouse Panel</font></b>
<p><b><font color="#274342">The layout of the </font><font color="#FF0000">Mouse</font><font color="#274342">
panel is shown in Figure 6.16, below.</font></b>
<p><img SRC="Sera3D/mouse_panel.jpg" NOSAVE height=193 width=198>
<p><b><font color="#274342">Figure 6.16.&nbsp; The Mouse panel layout.</font></b>
<p><b><font color="#274342">The two icons at the top of the panel switch
the rotation control method between the mouse buttons and sliders.&nbsp;
The left icon is for the </font><font color="#FF0000">sliders</font><font color="#274342">,
and the right is for the </font><font color="#FF0000">mouse</font><font color="#274342">.&nbsp;
When the slider rotation is activated, the sliders will appear below the
main rendering window.</font></b>
<p><b><font color="#274342">The </font><font color="#008007">rotational
locks</font><font color="#274342"> are used to prevent the bodies or clip
planes from being rotated.&nbsp; For example, the bodies can be locked,
which means that they cannot be rotated.&nbsp; If a clipping plane is inlaid,
the clipping will rotate around the locked bodies, cutting the bodies as
it rotates.</font></b>
<p><a NAME="6.4.12"></a><b><font color="#274342">6.4.12.&nbsp; View Parameters
Panel</font></b>
<p><b><font color="#274342">The </font><font color="#FF0000">View Parameters</font><font color="#274342">
panel is shown below, in Figure 6.17.</font></b>
<p><img SRC="Sera3D/view_params.jpg" NOSAVE height=169 width=215>
<p><b>Figure 6.17.&nbsp; The View Parameters panel.</b>
<p><b>The frame at the top switches between <font color="#FF0000">double
buffering</font> and <font color="#FF0000">single buffering</font>.&nbsp;
With <font color="#FF0000">double buffering</font>, the rendering is done
offscreen, and then the rendering frames are swapped.&nbsp; This provides
smooth rotations without any flashing.&nbsp; With <font color="#FF0000">single
buffering</font>, the rendering is done directly to the screen.&nbsp; When
rotating in single buffer mode, the screen flashes as it re-renders. <font color="#FF0000">Single
buffering</font> is handy for watching the rendering.&nbsp; For example,
when volume rendering, it is beneficial to be in single buffered mode.&nbsp;
This allows the reconstruction process of stacking slices to be viewed
interactively.</b>
<p><b>The second item is the toggle for the <font color="#008007">Frame
Rate</font>.&nbsp; When toggled <font color="#FF0000">on</font>, the frame
rate is displayed in the bottom left corner of the main rendering window.&nbsp;
The <font color="#008007">Test Polygon Speed</font> button runs a small
test to give an approximation of the rendering speed of your system.&nbsp;
The <font color="#008007">Show Center Mass for Bodies</font> will display
the center of mass for each of the segmented regions in the univel file.</b>
<p><a NAME="6.4.13"></a><b><font color="#274342">6.4.13.&nbsp; Beam Panel</font></b>
<p><img SRC="Sera3D/beam_panel.jpg" NOSAVE height=391 width=199>
<p><b>Figure 6.18a.&nbsp; The Beam panel layout.</b>
<p><b>The <font color="#FF0000">Beam</font> panel, shown in Figure 6.18a,
is used as an aid to position the beam/patient, or simply to view along
the beam specified in the particle track file.&nbsp; The <font color="#008007">Beam
in Use</font> menu at the top switches between the beam from the particle
track file and the interactive beam.&nbsp; To switch the view in the main
rendering window to a beam line view, toggle <font color="#FF0000">on</font>
the
<font color="#008007">Beam Line View</font> button.&nbsp; The icons
on the right side of the panel provide several different crosshairs for
use in viewing along the beam line.</b>
<p><b>The two sliders below the <font color="#008007">Beam Line View</font>
panel control the position along the beam line.&nbsp; The left slider will
slide the camera view forward or backwards along the beam line.&nbsp; The
right slider is used for the beam slice.&nbsp; A beam slice is an inlaid
medical image slice normal to the beam.&nbsp; To inlay a beam slice, toggle
<font color="#FF0000">on</font>
the <font color="#008007">Inlay Beam Slice</font> toggle button.&nbsp;
The right slider then moves the position of the beam slice along the beam
line.&nbsp; The <font color="#008007">Clip With Beam Slice</font> will
clip the regions at the position of the beam slice.</b>
<p><b>To control the position of the interactive beam, the <font color="#008007">I-Beam
Controls</font> button brings up a dialog like the one shown in Figure
6.18b.</b>
<p><img SRC="Sera3D/ibeam_window.jpg" NOSAVE height=420 width=252>
<p><b>Figure 6.18b. The Interactive Beam Control Dialog</b>
<p><b>The position of the interactive beam can be set using the three sliders,
or the values can be entered into the text boxes labelled P-A, R-L and
I-S.&nbsp; As the position of the beam changes, the values in the text
boxes labelled Zb, phi and Theta are also updated.&nbsp; These values correspond
to the parameters in the seraCalc interface with the same names.&nbsp;
The interactive beam can also be set by supplying these values directly.</b>
<p><b>When <font color="#008007">Beam Line View</font> is toggled <font color="#FF0000">on</font><font color="#000000">,</font>
the option <font color="#009900">Use </font><font color="#008007">Aperture</font>
can be selected.&nbsp; This provides a small ring in the center of the
main rendering window, which gives a measureable ring for examining the
regions through a given beam diameter.&nbsp; When <font color="#009900">Use
</font><font color="#008007">Aperture</font>
is enabled, the rendering switches to a parallel projection, allowing for
accurate measuring with the ring aperture.&nbsp; Because of the parallel
projection, the position of the slider along the beam will not affect the
rendering.&nbsp; The sizes of the aperture and rendering window can be
set with the <font color="#008007">Aperture Settings</font> button.&nbsp;
When&nbsp; <font color="#009900">Use </font><font color="#008007">Aperture</font>
is enabled, the aperture and window sizes are displayed in the top left
corner of the main rendering window.</b>
<p><a NAME="6.4.14"></a><b><font color="#274342">6.4.14.&nbsp; Texture
Mapping Panel</font></b>
<p><img SRC="Sera3D/texture_panel.jpg" NOSAVE height=273 width=208>
<p><b><font color="#274342">Figure 6.19.&nbsp; The Texture Mapping panel
layout.</font></b>
<p><b><font color="#274342">The </font><font color="#FF0000">Texture Mapping
Panel</font><font color="#274342"> provides the tools for controlling the
texture mapping.&nbsp; The first panel determines how the texture will
be applied to the polygons.&nbsp; </font><font color="#FF0000">Nearest</font><font color="#274342">
will do a direct mapping from the nearest value in the texture map.&nbsp;
This is the faster method, but it will produce a blocky appearance between
the slices.&nbsp; </font><font color="#FF0000">Linear</font><font color="#274342">
will linearly interpolate between the 8 nearest neighbors in the texture
map, providing a smoother slice.</font></b>
<p><b>The second panel determines what to do with the polygons that extend
out of the texture map.&nbsp; With the <font color="#FF0000">Repeat</font>
option, the texture will repeat for polygons outside of the texture map.&nbsp;
The <font color="#FF0000">Clamp</font> option will clamp at the border
value for the polygons outside of the texture map.</b>
<p><b>The <font color="#008007">Gamma Correction</font>&nbsp; toggle will
apply a gamma correction function to the gray values of the images, brightening
them.&nbsp; The <font color="#008007">Alpha Culling</font> button toggles
the alpha culling.&nbsp; Alpha culling is used to remove gray levels from
the polygons.&nbsp; For example, if a slice is inlaid without alpha culling,
the whole slice, including the buffer, will be inlaid into the rendering.&nbsp;
If <font color="#008007">Alpha Culling</font> is enabled, the buffer (i.e.,
dark values) will be removed, leaving just the image itself.&nbsp; The
slider under the <font color="#008007">Alpha Culling</font> toggle sets
which gray values will be culled.&nbsp;&nbsp; The values culled are less
than the current slider value.</b>
<p><b><font color="#008007">Volume Rendering</font> gives the ability to
reconstruct 3D structure directly from the medical images.&nbsp; To volume
render, simply press the <font color="#008007">Volume Rendering</font>
button.&nbsp; At the bottom of the panel is the <font color="#008007">Texture
Polygonal Bodies</font> toggle.&nbsp; When the viewing style is <font color="#FF0000">polygonal</font>,
this button will toggle the texture mapping of the surfaces.&nbsp; This
is useful when the colorwashed dose contours are loaded; texturing the
surfaces will colorwash the regional surfaces with the dose contours.&nbsp;
An example would be viewing the surfaces of the tumor and being able to
see the 95% dose level directly on the surface.</b>
<br>&nbsp;
<p><a NAME="6.5"></a><b><font size=+1>6.5.&nbsp; The Preferences</font></b>
<p><img SRC="Sera3D/preferences_window.jpg" NOSAVE height=397 width=464>
<p><b>Figure 6.20.&nbsp; The Preferences popup window.</b>
<p><b>The <font color="#008007">Preferences</font> window, shown in Figure
6.20,&nbsp; is selected under <font color="#FF0000">Preferences</font>
in the Menubar.&nbsp; This window is used to set the commonly used items
in the program to suit the user's preferences.&nbsp; When the preference
window is opened, all of the items in the window are set to their current
settings in the program.&nbsp; Once the preferences are saved (using the
<font color="#008007">Save</font>
button), these become the defaults for the program.&nbsp; When the program
starts, it sets all its parameters to the user specified preferences. <font color="#990000">Note
that changing the values will only apply to the next invocation of sera3d,
not to the present session.</font></b>
<p><b>The preferences are broken into separate panels.</b>
<p><a NAME="6.5.1"></a><b>6.5.1.&nbsp; Window Sizes</b>
<p><b>The <font color="#FF0000">window size</font> preference panel can
be seen above (Figure 6.20).&nbsp; It has the settings for the window sizes
and background color, which are also found in the <font color="#FF0000">Options</font>
menu.</b>
<p><a NAME="6.5.2"></a><b>6.5.2.&nbsp; Color</b>
<p><img SRC="Sera3D/color_prefs.jpg" NOSAVE height=79 width=406>
<p><b>Figure 6.21.&nbsp; The Color Preference panel.</b>
<p><b>The <font color="#008007">color preference</font> panel, shown in
Figure 6.21, has a toggle for the body coloring information.&nbsp; The
colors for the regions are stored in the <font color="#CC6600">.uvh</font>
file.&nbsp; To use the stored colors, simply check this toggle.&nbsp; If
prefered, the user can specify default colors for the regions.&nbsp; Uncheck
the toggle and the color presets for each body will be used.</b>
<p><a NAME="6.5.3"></a><b>6.5.3.&nbsp; Axes</b>
<p><img SRC="Sera3D/axes_prefs.jpg" NOSAVE height=121 width=405>
<p><b>Figure 6.22.&nbsp; The Axis Preference panel.</b>
<p><b>The <font color="#008007">axis preference</font> panel, seen in Figure
6.22, is the same as the <a href="#6.4.5">Axes Control</a> panel in the
main interface.</b>
<p><a NAME="6.5.4"></a><b>6.5.4.&nbsp; Mouse</b>
<p><img SRC="Sera3D/mouse_prefs.jpg" NOSAVE height=68 width=403>
<p><b>Figure 6.23.&nbsp; The Mouse Preference panel.</b>
<p><b>The <font color="#008007">Mouse preference</font> panel (see Figure
6.23) sets the prefered rotation method (sliders or mouse).&nbsp; This
has the same function as the <a href="#6.4.11">Mouse</a> panel in the main
interface.</b>
<p><a NAME="6.5.5"></a><b>6.5.5.&nbsp; Particle Paths</b>
<p><img SRC="Sera3D/paths_prefs.jpg" NOSAVE height=298 width=401>
<p><b>Figure 6.24.&nbsp; The Particle Paths Preference panel.</b>
<p><b>The <font color="#008007">Particle Paths preference</font> panel
(see Figure 6.24) sets the prefered line types and colors for the particle
tracks.</b>
<p><a NAME="6.5.6"></a><b>6.5.6.&nbsp; Texture</b>
<p><img SRC="Sera3D/texture_prefs.jpg" NOSAVE height=142 width=404>
<p><b>Figure 6.25.&nbsp; The Texture Preference panel.</b>
<p><b>The <font color="#008007">Texture preference</font> panel, shown
in Figure 6.25, allows the prefered texturing parameters to be set.</b>
<p><a NAME="6.5.7"></a><b>6.5.7.&nbsp; Miscellaneous</b>
<p><img SRC="Sera3D/misc_prefs.jpg" NOSAVE height=359 width=448>
<p><b>Figure 6.26.&nbsp; The Miscellaneous Preference panel.</b>
<p><b>The <font color="#008007">Miscellaneous preference</font> panel,
shown in Figure 6.26, has a variety of items.&nbsp; The <font color="#008007">Rendering
Quality</font> panel is used to set the quality of the first 3 view styles
(<font color="#FF0000">wireframe</font>, <font color="#FF0000">solid outline</font>,
and <font color="#FF0000">solid rendering</font>).&nbsp; In general, as
the quality of the rendering is lowered, the speed of the rendering improves.&nbsp;
When running on machines without hardware acceleration, it is better to
use a lower quality.</b>
<p><b>The <font color="#008007">Polygon Quality</font> is very similiar
to the <font color="#008007">Rendering Quality</font>, but this applies
to the <font color="#FF0000">polygon</font> surface view style.&nbsp; Again,
without hardware acceleration, a lower polygon quality should be used.&nbsp;
This lowers the number of polygons created for the surface representation.&nbsp;
The <font color="#008007">Polygon Algorithm</font> type is the same menu
as on the <a href="#6.4.7">Polygon Control</a> Panel.</b>
<p><b>The <font color="#008007">Messages</font> toggle controls the display
of the message bar at startup.&nbsp; The <font color="#008007">Fast Rotation</font>
menu is the same as in the <font color="#FF0000">Options</font> menu.&nbsp;
The <font color="#008007">Measure Units</font> box sets the units, either
<font color="#FF0000">cm</font>
or <font color="#FF0000">mm</font>, for all measurements in sera3d.</b>
<br>&nbsp;
<br>&nbsp;
<br>
<br>
<center>
<p><img SRC="marblebar.jpg" NOSAVE height=6 width=460>
<br>&nbsp;
<p><a href="sec05.html"><img SRC="bullet10.gif" NOSAVE height=17 width=17></a><b><a href="sec05.html">Previous<a href="toc.html"><img SRC="bullet10.gif" NOSAVE height=17 width=17></a></a><a href="toc.html">Contents<a href="sec07.html"><img SRC="bullet10.gif" NOSAVE height=17 width=17></a></a><a href="sec07.html">Next</a></b></center>

<p><br>
</body>
</html>
